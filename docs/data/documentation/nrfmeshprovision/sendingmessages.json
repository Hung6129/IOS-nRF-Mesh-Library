{"kind":"article","abstract":[{"text":"Bluetooth mesh is built on publish-subscribe paradigm. Each node can publish messages and receive messages","type":"text"},{"type":"text","text":" "},{"type":"text","text":"sent by other nodes."}],"sections":[],"identifier":{"url":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/SendingMessages","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"anchor":"Overview","text":"Overview","type":"heading"},{"inlineContent":[{"text":"The nRF Mesh library supports sending messages in two ways:","type":"text"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"From models on the local node, that are configured for publishing."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Directly.","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"The first method closely follows Bluetooth Mesh Profile specification, but is quite complex."},{"type":"text","text":" "},{"type":"text","text":"A model needs to be bound to an Application Key using "},{"isActive":true,"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelAppBind","type":"reference"},{"type":"text","text":" message"},{"type":"text","text":" "},{"text":"and have a publication set using ","type":"text"},{"isActive":true,"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelPublicationSet","type":"reference"},{"type":"text","text":" or"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelPublicationVirtualAddressSet"},{"type":"text","text":". With that set, calling"},{"text":" ","type":"text"},{"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/publish(using:)","type":"reference","isActive":true},{"type":"text","text":" or "},{"type":"reference","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/publish(_:using:)","isActive":true},{"text":" will trigger a publication","type":"text"},{"text":" ","type":"text"},{"text":"from the model to a destination specified in the ","type":"text"},{"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Publish","isActive":true,"type":"reference"},{"type":"text","text":" object. Responses will be delivered"},{"text":" ","type":"text"},{"text":"to ","type":"text"},{"type":"reference","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/model(_:didReceiveResponse:toAcknowledgedMessage:from:)","isActive":true},{"type":"text","text":" of the model delegate."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The second method does not require setting up local models."},{"type":"text","text":" "},{"text":"Use ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/MeshNetworkManager\/send(_:from:to:withTtl:using:)-48vjl"},{"type":"text","text":" or other variants of this method to send"},{"text":" ","type":"text"},{"type":"text","text":"a message to the desired destination."}]},{"name":"Note","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"All methods used for sending messages in the "},{"type":"reference","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/MeshNetworkManager","isActive":true},{"text":" are asynchronous.","type":"text"}]}],"type":"aside"}]}],"metadata":{"title":"Sending messages","roleHeading":"Article","modules":[{"name":"nRFMeshProvision"}],"role":"article"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/nrfmeshprovision\/sendingmessages"]}],"hierarchy":{"paths":[["doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision"]]},"seeAlsoSections":[{"generated":true,"identifiers":["doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/LocalNode","doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Exporting","doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Provisioning","doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Configuration"],"title":"Articles"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"references":{"doc://nRFMeshProvision/documentation/nRFMeshProvision/LocalNode":{"type":"topic","kind":"article","title":"Setting up Local Node","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/LocalNode","url":"\/documentation\/nrfmeshprovision\/localnode","abstract":[{"type":"text","text":"Defining the behavior of the node."}],"role":"article"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/MeshNetworkManager/send(_:from:to:withTtl:using:)-48vjl":{"type":"topic","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"send","kind":"identifier"},{"text":"(","kind":"text"},{"text":"MeshMessage","kind":"typeIdentifier","preciseIdentifier":"s:16nRFMeshProvision11MeshMessageP"},{"kind":"text","text":", "},{"text":"from","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Element","preciseIdentifier":"s:16nRFMeshProvision7ElementC"},{"text":"?, ","kind":"text"},{"text":"to","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:16nRFMeshProvision11MeshAddressV","text":"MeshAddress","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"withTtl","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:s5UInt8V","kind":"typeIdentifier","text":"UInt8"},{"text":"?, ","kind":"text"},{"kind":"externalParam","text":"using"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:16nRFMeshProvision14ApplicationKeyC","kind":"typeIdentifier","text":"ApplicationKey"},{"text":") ","kind":"text"},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"}],"abstract":[{"text":"Encrypts the message with the Application Key and the Network Key","type":"text"},{"type":"text","text":" "},{"type":"text","text":"bound to it, and sends to the given destination address."}],"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/MeshNetworkManager\/send(_:from:to:withTtl:using:)-48vjl","kind":"symbol","url":"\/documentation\/nrfmeshprovision\/meshnetworkmanager\/send(_:from:to:withttl:using:)-48vjl","title":"send(_:from:to:withTtl:using:)","role":"symbol"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ConfigModelAppBind":{"abstract":[],"type":"topic","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ConfigModelAppBind","kind":"identifier"}],"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelAppBind","kind":"symbol","url":"\/documentation\/nrfmeshprovision\/configmodelappbind","navigatorTitle":[{"text":"ConfigModelAppBind","kind":"identifier"}],"title":"ConfigModelAppBind"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/Configuration":{"kind":"article","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Configuration","type":"topic","url":"\/documentation\/nrfmeshprovision\/configuration","abstract":[{"text":"Configuration allows to customize the behavior of the local and remote nodes.","type":"text"}],"role":"article","title":"Configuration"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ModelDelegate/publish(using:)":{"fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"publish"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"using"},{"kind":"text","text":": "},{"text":"MeshNetworkManager","kind":"typeIdentifier","preciseIdentifier":"s:16nRFMeshProvision18MeshNetworkManagerC"},{"text":") -> ","kind":"text"},{"text":"MessageHandle","preciseIdentifier":"s:16nRFMeshProvision13MessageHandleV","kind":"typeIdentifier"},{"kind":"text","text":"?"}],"kind":"symbol","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/publish(using:)","type":"topic","url":"\/documentation\/nrfmeshprovision\/modeldelegate\/publish(using:)","abstract":[{"text":"Publishes a single message created by Modelâ€™s message composer using","type":"text"},{"text":" ","type":"text"},{"text":"the Publish information set in the underlying Model.","type":"text"}],"role":"symbol","title":"publish(using:)"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/Publish":{"title":"Publish","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"The Publish object defines the publication configuration for a Model."}],"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Publish","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Publish","kind":"identifier"}],"navigatorTitle":[{"text":"Publish","kind":"identifier"}],"url":"\/documentation\/nrfmeshprovision\/publish"},"doc://nRFMeshProvision/documentation/nRFMeshProvision":{"kind":"symbol","type":"topic","title":"nRFMeshProvision","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision","role":"collection","url":"\/documentation\/nrfmeshprovision","abstract":[{"type":"text","text":"Provision, configure and control Bluetooth mesh devices with nRF Mesh library."}]},"doc://nRFMeshProvision/documentation/nRFMeshProvision/MeshNetworkManager":{"navigatorTitle":[{"text":"MeshNetworkManager","kind":"identifier"}],"kind":"symbol","title":"MeshNetworkManager","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"MeshNetworkManager"}],"abstract":[{"type":"text","text":"The main object responsible for managing the mesh network."}],"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/MeshNetworkManager","url":"\/documentation\/nrfmeshprovision\/meshnetworkmanager","role":"symbol","type":"topic"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ModelDelegate/model(_:didReceiveResponse:toAcknowledgedMessage:from:)":{"fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"model","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:16nRFMeshProvision5ModelC","text":"Model"},{"kind":"text","text":", "},{"text":"didReceiveResponse","kind":"externalParam"},{"kind":"text","text":": "},{"text":"MeshResponse","preciseIdentifier":"s:16nRFMeshProvision12MeshResponseP","kind":"typeIdentifier"},{"kind":"text","text":", "},{"text":"toAcknowledgedMessage","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:16nRFMeshProvision23AcknowledgedMeshMessageP","text":"AcknowledgedMeshMessage","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"externalParam","text":"from"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Address","preciseIdentifier":"s:16nRFMeshProvision7Addressa"},{"kind":"text","text":")"}],"kind":"symbol","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/model(_:didReceiveResponse:toAcknowledgedMessage:from:)","required":true,"type":"topic","url":"\/documentation\/nrfmeshprovision\/modeldelegate\/model(_:didreceiveresponse:toacknowledgedmessage:from:)","abstract":[{"text":"This method should handle the received response to the","type":"text"},{"text":" ","type":"text"},{"text":"previously sent request.","type":"text"}],"role":"symbol","title":"model(_:didReceiveResponse:toAcknowledgedMessage:from:)"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ConfigModelPublicationSet":{"type":"topic","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelPublicationSet","role":"symbol","url":"\/documentation\/nrfmeshprovision\/configmodelpublicationset","title":"ConfigModelPublicationSet","navigatorTitle":[{"text":"ConfigModelPublicationSet","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ConfigModelPublicationSet","kind":"identifier"}],"kind":"symbol","abstract":[]},"doc://nRFMeshProvision/documentation/nRFMeshProvision/Provisioning":{"kind":"article","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Provisioning","type":"topic","url":"\/documentation\/nrfmeshprovision\/provisioning","abstract":[{"text":"Provisioning is the process of adding an unprovisioned device to a mesh network in a secure way.","type":"text"}],"role":"article","title":"Provisioning"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ModelDelegate/publish(_:using:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"publish","kind":"identifier"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:16nRFMeshProvision11MeshMessageP","text":"MeshMessage"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"using"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:16nRFMeshProvision18MeshNetworkManagerC","kind":"typeIdentifier","text":"MeshNetworkManager"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:16nRFMeshProvision13MessageHandleV","kind":"typeIdentifier","text":"MessageHandle"},{"text":"?","kind":"text"}],"kind":"symbol","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ModelDelegate\/publish(_:using:)","type":"topic","url":"\/documentation\/nrfmeshprovision\/modeldelegate\/publish(_:using:)","abstract":[{"text":"Publishes a single message given as a parameter using the","type":"text"},{"text":" ","type":"text"},{"text":"Publish information set in the underlying Model.","type":"text"}],"role":"symbol","title":"publish(_:using:)"},"doc://nRFMeshProvision/documentation/nRFMeshProvision/ConfigModelPublicationVirtualAddressSet":{"abstract":[],"identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/ConfigModelPublicationVirtualAddressSet","kind":"symbol","type":"topic","url":"\/documentation\/nrfmeshprovision\/configmodelpublicationvirtualaddressset","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"ConfigModelPublicationVirtualAddressSet","kind":"identifier"}],"role":"symbol","title":"ConfigModelPublicationVirtualAddressSet","navigatorTitle":[{"kind":"identifier","text":"ConfigModelPublicationVirtualAddressSet"}]},"doc://nRFMeshProvision/documentation/nRFMeshProvision/Exporting":{"role":"article","abstract":[{"text":"Export and import feature allows to share mesh network configuration between","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"devices."}],"title":"Exporting network configuration","type":"topic","kind":"article","identifier":"doc:\/\/nRFMeshProvision\/documentation\/nRFMeshProvision\/Exporting","url":"\/documentation\/nrfmeshprovision\/exporting"}}}